<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <!--<link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">-->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>沈默的騎行 Ride of Silence by t-u-b-a</title>
  </head>

  <body>
    <style>
#victims {
  margin-top: 120px;
}
      
#victims svg:hover path {
  stroke: #606060;
}

.broken_bike {
  margin: 10px;
  width: 100px;
  height: 60px;
}
 
.obituary {
  font-size: 14px;
}
      
p.obituary {
  margin-bottom: 4px;
}

h2.obituary {
  font-size: 18px;
}
    </style>
    <div id="container">
      <div class="inner">

        <header>
          <h1>沈默的騎行 Ride of Silence</h1>
          <h2>紀念在公路上事故傷亡的單車騎士</h2>
        </header>

        <section id="downloads" class="clearfix">
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a id="關於沈默的騎行" class="anchor" href="#%E9%97%9C%E6%96%BC%E6%B2%88%E9%BB%98%E7%9A%84%E9%A8%8E%E8%A1%8C" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>關於沈默的騎行</h3>

<p>起源於2003年美國達拉斯，<a href="http://www.rideofsilence.org/">Ride of Silence</a>已經有超過十年的歷史。這活動固定在每年五月的第三個星期三，邀請大家上街騎行，<strong>紀念因車禍傷亡的單車騎士</strong>，希望大家<strong>正視單車族在公路上的存在</strong>及<strong>路權</strong>。今年(2016)在全球已經有超過250個地方響應這個活動。</p>

<h3>
<a id="時間路線" class="anchor" href="#%E6%99%82%E9%96%93%E8%B7%AF%E7%B7%9A" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>時間路線</h3>

<ul>
<li>時間：2016/5/18 19:00 集合，19:30 開始</li>
<li>路線：TBD</li>
</ul>

<h3>
<a id="活動守則" class="anchor" href="#%E6%B4%BB%E5%8B%95%E5%AE%88%E5%89%87" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>活動守則</h3>

<ul>
<li>向傷亡者表達尊敬與支持，不嘻笑喧鬧。鼓勵穿著黑/白的素色衣物。</li>
<li>騎行全程盡量保持沈默與安靜，使用手勢來傳達路況。</li>
<li>速度不超過20km/h。</li>
<li>請戴安全帽，腳踏車必須裝設前白後紅的車燈。</li>
<li>全程遵守交通規則。</li>
</ul>
        </section>
        
        <hr>
        
        <h2>單車死亡名錄</h2>
        <p>這個網頁上每一輛故障腳踏車，都代表了一個破碎的家庭。</p>
        
        
        <section id="victims">
          <!-- Generated by javascript -->
        </section>

        <footer>
          沈默的騎行 Ride of Silence is maintained by <a href="https://github.com/t-u-b-a">TUBA</a>.<br>
        </footer>

        <script src="https://code.jquery.com/jquery-2.2.3.min.js" 
                integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="
                crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.3.0/svg.js"></script>
        <script>

function wheel_path(center, radius) {
  var x = center.x + radius;
  var y = center.y;
  var p = "M" + x + "," + y;
  var theta = 0;
  var count = 0;
  while (theta < Math.PI * 2.0) {
    var r = (radius / 2) + Math.random() * (radius / 2);
    if (count < 2) {
      r = radius;
    }
    x = center.x + r * Math.cos(theta);
    y = center.x + r * Math.sin(theta);
    x1 = x + Math.cos(theta - Math.PI / 2) * 30;
    y1 = y + Math.sin(theta - Math.PI / 2) * 30;
    p += "S" + x1 + "," + y1 + "," + x + "," + y; 
    theta += 0.6 + Math.random() * 0.8;
    count++;
  }
  p += "Z";
  return p;
}

function broken_bike(element, extra) {
  var stroke_color = extra ? '#c0c0c0' : '#eaeaea';
  var broken_bike = SVG(element).size(100, 60)
  var g = broken_bike.group();
  g.scale(0.2, 0.2);
  var frame = g.group();
  frame.path("M123,202L156,142L188,40L158,37C158,37 126,35 119,58C112,80 142,87 142,87").fill('none').stroke({width: 15, color: stroke_color})
  frame.path("M180,85L300,90L380,200L270,210L170,90").fill('none').stroke({width: 15, color: stroke_color})
  frame.path("M270,22L315,20L270,210").fill('none').stroke({width: 15, color: stroke_color})
  frame.path("M350,15L315,20").fill('none').stroke({width: 15, color: stroke_color})
  
  var front_wheel = g.group();
  front_wheel.path(wheel_path({x: 75, y: 75}, 75)).fill('none').stroke({width: 15, color: stroke_color}).translate(45, 125).rotate(Math.random() * 360);
  var rear_wheel = g.group();
  rear_wheel.path(wheel_path({x: 75, y: 75}, 75)).fill('none').stroke({width: 15, color: stroke_color}).translate(305, 125).rotate(Math.random() * 360);
}

function has_extra_metadata(v) {
  return v["name"] || (v["summary"] && v.summary.trim().length > 0) || (v["url"] && v.url.trim().length > 0);
}

function obituary(v) {
  var content = $(document.createElement('div'));
  var date = $(document.createElement('p'));
  date.text("日期：" + v.date.substring(0,10)).addClass("obituary");
  content.append(date);
  
  var location = $(document.createElement('p'));
  location.text("地點：" + v.location).addClass("obituary");
  content.append(location);
  
  if (has_extra_metadata(v)) {
    content.append(document.createElement('hr'));
  }
  
  if (v["name"]) {
    var n = $(document.createElement('h2'));
    var name = v.name
    if (v["age"]) name += ", " + v["age"];
    if (v["gender"]) name += ", " + v["gender"];
    n.text(name).addClass("obituary");
    content.append(n);
  }
  if (v["summary"]) {
    var s = $(document.createElement('p'));
    s.text(v["summary"]).addClass("obituary");
    content.append(s);
  }
  if (v["url"]) {
    var u = $(document.createElement('div'));
    u.html('<a href="' + v.url + '">新聞連結</a>').addClass("obituary");
    content.append(u);
  }
  return content.html();
}

function generate_for_victims(victims) { 
  for (var i = victims.length - 1; i >= 0; i--) {
    var v = victims[i];
    var element_id = "victim_" + i;
    var img = $("<span>", {id: element_id, class: 'broken_bike'});
    $("#victims").append(img);
    img.webuiPopover({placement:'top', offsetTop: -40, content: obituary(v), trigger:'hover', animation:'fade', width: 320});
    broken_bike(element_id, has_extra_metadata(v));
  }
}
        </script>
        <script src="victims.js"></script>
      </div>
    </div>
  </body>
</html>
